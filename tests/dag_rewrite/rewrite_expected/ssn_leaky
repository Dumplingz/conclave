CREATE RELATION a_govreg([a {1}, b {1}]) {1} WITH COLUMNS (INTEGER, INTEGER)
CREATE RELATION company0([c {1 2}, d {2}]) {2} WITH COLUMNS (INTEGER, INTEGER)
PROJECT [c, d] FROM (company0([c {1 2}, d {2}]) {2}) AS company0_dummy([c {1 2}, d {2}]) {2}
CLOSEMPC company0_dummy([c {1 2}, d {2}]) {2} INTO company0_dummy_close([c {1 2}, d {2}]) {1, 2, 3}
CREATE RELATION company1([c {1 3}, d {3}]) {3} WITH COLUMNS (INTEGER, INTEGER)
PROJECT [c, d] FROM (company1([c {1 3}, d {3}]) {3}) AS company1_dummy([c {1 3}, d {3}]) {3}
CLOSEMPC company1_dummy([c {1 3}, d {3}]) {3} INTO company1_dummy_close([c {1 3}, d {3}]) {1, 2, 3}
CONCATMPC [company0_dummy_close([c {1 2}, d {2}]) {1, 2, 3}, company1_dummy_close([c {1 3}, d {3}]) {1, 2, 3}] AS companies([c {1}, d {}]) {1, 2, 3}
PROJECT [a, b] FROM (a_govreg([a {1}, b {1}]) {1}) AS govreg_dummy([a {1}, b {1}]) {1}
CLOSEMPC govreg_dummy([a {1}, b {1}]) {1} INTO govreg_dummy_close([a {1}, b {1}]) {1, 2, 3}
SHUFFLEMPC (govreg_dummy_close([a {1}, b {1}]) {1, 2, 3}) AS left_shuffled_hybrid_join_1([a {1}, b {1}]) {1, 2, 3}
PERSISTMPC left_shuffled_hybrid_join_1([a {1}, b {1}]) {1, 2, 3} INTO left_persisted_hybrid_join_1([a {1}, b {1}]) {1, 2, 3}
PROJECTMPC [a] FROM (left_shuffled_hybrid_join_1([a {1}, b {1}]) {1, 2, 3}) AS left_keys_closed_hybrid_join_1([a {}]) {1, 2, 3}
OPENMPC left_keys_closed_hybrid_join_1([a {}]) {1, 2, 3} INTO left_keys_open_hybrid_join_1([a {}]) {1}
INDEX (left_keys_open_hybrid_join_1([a {}]) {1}) AS left_indexed_hybrid_join_1([lidx {}, a {}]) {1}
SHUFFLEMPC (companies([c {1}, d {}]) {1, 2, 3}) AS right_shuffled_hybrid_join_1([c {1}, d {}]) {1, 2, 3}
PERSISTMPC right_shuffled_hybrid_join_1([c {1}, d {}]) {1, 2, 3} INTO right_persisted_hybrid_join_1([c {1}, d {}]) {1, 2, 3}
PROJECTMPC [c] FROM (right_shuffled_hybrid_join_1([c {1}, d {}]) {1, 2, 3}) AS right_keys_closed_hybrid_join_1([c {}]) {1, 2, 3}
OPENMPC right_keys_closed_hybrid_join_1([c {}]) {1, 2, 3} INTO right_keys_open_hybrid_join_1([c {}]) {1}
INDEX (right_keys_open_hybrid_join_1([c {}]) {1}) AS right_indexed_hybrid_join_1([ridx {}, c {}]) {1}
(left_indexed_hybrid_join_1([lidx {}, a {}]) {1}) JOIN (right_indexed_hybrid_join_1([ridx {}, c {}]) {1}) ON [a] AND [c] AS joined_indexes_hybrid_join_1([a {}, lidx {}, ridx {}]) {1}
PROJECT [ridx] FROM (joined_indexes_hybrid_join_1([a {}, lidx {}, ridx {}]) {1}) AS indexes_right_hybrid_join_1([ridx {}]) {1}
INDEX (indexes_right_hybrid_join_1([ridx {}]) {1}) AS indexes_right_hybrid_join_1_reidx([rr {}, ridx {}]) {1}
PERSIST indexes_right_hybrid_join_1([ridx {}]) {1} INTO indexes_right_hybrid_join_1([ridx {}]) {1}
PROJECT [lidx] FROM (joined_indexes_hybrid_join_1([a {}, lidx {}, ridx {}]) {1}) AS indexes_left_hybrid_join_1([lidx {}]) {1}
NUM_ROWS indexes_left_hybrid_join_1([lidx {}]) {1} AS num_lookups_hybrid_join_1([len {}]) {1}
CLOSEMPC num_lookups_hybrid_join_1([len {}]) {1} INTO num_lookups_closed_hybrid_join_1([len {}]) {1, 2, 3}
INDEX (indexes_left_hybrid_join_1([lidx {}]) {1}) AS indexes_left_hybrid_join_1_reidx([ll {}, lidx {}]) {1}
SORTBY lidx FROM (indexes_left_hybrid_join_1_reidx([ll {}, lidx {}]) {1}) AS left_unpermuted_hybrid_join_1([ll {}, lidx {}]) {1}
PROJECT [lidx] FROM (left_unpermuted_hybrid_join_1([ll {}, lidx {}]) {1}) AS left_unpermuted_proj_hybrid_join_1([lidx {}]) {1}
IDX_TO_FLAGS left_indexed_hybrid_join_1([lidx {}, a {}]) {1} left_unpermuted_proj_hybrid_join_1([lidx {}]) {1} AS left_encoded_hybrid_join_1([lidx {}]) {1}
CLOSEMPC left_encoded_hybrid_join_1([lidx {}]) {1} INTO left_encoded_closed_hybrid_join_1([lidx {}]) {1, 2, 3}
(left_persisted_hybrid_join_1([a {1}, b {1}]) {1, 2, 3}) FLAGJOINMPC (left_encoded_closed_hybrid_join_1([lidx {}]) {1, 2, 3}) WITH FLAGS (num_lookups_closed_hybrid_join_1([len {}]) {1, 2, 3}) ON [] AND [] AS left_flags_and_indexes_closed_hybrid_join_1([a {1}, b {1}]) {1, 2, 3}
OPENMPC left_flags_and_indexes_closed_hybrid_join_1([a {1}, b {1}]) {1, 2, 3} INTO left_flags_and_indexes_hybrid_join_1([a {1}, b {1}]) {1}
PROJECT [ll] FROM (left_unpermuted_hybrid_join_1([ll {}, lidx {}]) {1}) AS left_unpermuted_idx_hybrid_join_1([ll {}]) {1}
CLOSEMPC left_unpermuted_idx_hybrid_join_1([ll {}]) {1} INTO left_unpermuted_closed_hybrid_join_1([ll {}]) {1, 2, 3}
PERSIST left_unpermuted_closed_hybrid_join_1([ll {}]) {1, 2, 3} INTO left_unpermuted_closed_hybrid_join_1([ll {}]) {1, 2, 3}
PERSIST indexes_left_hybrid_join_1([lidx {}]) {1} INTO indexes_left_hybrid_join_1([lidx {}]) {1}
IDX_TO_FLAGS indexes_left_hybrid_join_1([lidx {}]) {1} left_flags_and_indexes_hybrid_join_1([a {1}, b {1}]) {1} AS left_arranged_hybrid_join_1([a {1}]) {1}
CLOSEMPC left_arranged_hybrid_join_1([a {1}]) {1} INTO left_arranged_closed_hybrid_join_1([a {1}]) {1, 2, 3}
BLACKBOXMPC[sharemind] left_res_hybrid_join_1([a {}, b {}]) {1, 2, 3}
SORTBY ridx FROM (indexes_right_hybrid_join_1_reidx([rr {}, ridx {}]) {1}) AS right_unpermuted_hybrid_join_1([rr {}, ridx {}]) {1}
PROJECT [rr] FROM (right_unpermuted_hybrid_join_1([rr {}, ridx {}]) {1}) AS right_unpermuted_idx_hybrid_join_1([rr {}]) {1}
CLOSEMPC right_unpermuted_idx_hybrid_join_1([rr {}]) {1} INTO right_unpermuted_closed_hybrid_join_1([rr {}]) {1, 2, 3}
PERSIST right_unpermuted_closed_hybrid_join_1([rr {}]) {1, 2, 3} INTO right_unpermuted_closed_hybrid_join_1([rr {}]) {1, 2, 3}
PROJECT [ridx] FROM (right_unpermuted_hybrid_join_1([rr {}, ridx {}]) {1}) AS right_unpermuted_proj_hybrid_join_1([ridx {}]) {1}
IDX_TO_FLAGS right_indexed_hybrid_join_1([ridx {}, c {}]) {1} right_unpermuted_proj_hybrid_join_1([ridx {}]) {1} AS right_encoded_hybrid_join_1([ridx {}]) {1}
CLOSEMPC right_encoded_hybrid_join_1([ridx {}]) {1} INTO right_encoded_closed_hybrid_join_1([ridx {}]) {1, 2, 3}
(right_persisted_hybrid_join_1([c {1}, d {}]) {1, 2, 3}) FLAGJOINMPC (right_encoded_closed_hybrid_join_1([ridx {}]) {1, 2, 3}) WITH FLAGS (num_lookups_closed_hybrid_join_1([len {}]) {1, 2, 3}) ON [] AND [] AS right_flags_and_indexes_closed_hybrid_join_1([c {1}, d {}]) {1, 2, 3}
OPENMPC right_flags_and_indexes_closed_hybrid_join_1([c {1}, d {}]) {1, 2, 3} INTO right_flags_and_indexes_hybrid_join_1([c {1}, d {}]) {1}
IDX_TO_FLAGS indexes_right_hybrid_join_1([ridx {}]) {1} right_flags_and_indexes_hybrid_join_1([c {1}, d {}]) {1} AS right_arranged_hybrid_join_1([c {1}]) {1}
CLOSEMPC right_arranged_hybrid_join_1([c {1}]) {1} INTO right_arranged_closed_hybrid_join_1([c {1}]) {1, 2, 3}
BLACKBOXMPC[sharemind] right_res_hybrid_join_1([c {}, d {}]) {1, 2, 3}
BLACKBOXMPC[sharemind] joined([a {}, b {}, d {}]) {1, 2, 3}
SHUFFLEMPC (joined([a {}, b {}, d {}]) {1, 2, 3}) AS shuffled_hybrid_agg_1([a {}, b {}, d {}]) {1, 2, 3}
PERSISTMPC shuffled_hybrid_agg_1([a {}, b {}, d {}]) {1, 2, 3} INTO persisted_hybrid_agg_1([a {}, b {}, d {}]) {1, 2, 3}
PROJECTMPC [b] FROM (shuffled_hybrid_agg_1([a {}, b {}, d {}]) {1, 2, 3}) AS keys_closed_hybrid_agg_1([b {}]) {1, 2, 3}
OPENMPC keys_closed_hybrid_agg_1([b {}]) {1, 2, 3} INTO keys_hybrid_agg_1([b {}]) {1}
INDEX (keys_hybrid_agg_1([b {}]) {1}) AS indexed_hybrid_agg_1([row_index {}, b {}]) {1}
SORTBY b FROM (indexed_hybrid_agg_1([row_index {}, b {}]) {1}) AS sorted_by_key_hybrid_agg_1([row_index {}, b {}]) {1}
PROJECT [row_index, b] FROM (sorted_by_key_hybrid_agg_1([row_index {}, b {}]) {1}) AS sorted_by_key_dummy_hybrid_agg_1([row_index {}, b {}]) {1}
CLOSEMPC sorted_by_key_dummy_hybrid_agg_1([row_index {}, b {}]) {1} INTO closed_sorted_by_key_hybrid_agg_1([row_index {}, b {}]) {1, 2, 3}
COMPNEIGHS b FROM (sorted_by_key_hybrid_agg_1([row_index {}, b {}]) {1}) AS eq_flags_hybrid_agg_1([b {}]) {1}
CLOSEMPC eq_flags_hybrid_agg_1([b {}]) {1} INTO closed_eq_flags_hybrid_agg_1([b {}]) {1, 2, 3}
IDXAGGMPC [d, sum] FROM (persisted_hybrid_agg_1([a {}, b {}, d {}]) {1, 2, 3}) GROUP BY [b] AS actual([b {}, total {}]) {1, 2, 3}
OPENMPC actual([b {}, total {}]) {1, 2, 3} INTO actual_open([b {1}, total {}]) {1}
